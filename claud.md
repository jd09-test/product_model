# product_graph — Oracle PGQL Complete Reference Guide

> **Graph Name:** `product_graph`  
> **Query Wrapper:** Always use `SELECT … FROM GRAPH_TABLE("product_graph" MATCH … COLUMNS (…))`  
> **Critical Rules:** Only use verified property names below. Never guess join keys — use the exact `source_vertex_column → target_vertex_column` pairs listed per edge.

---

## QUICK-START QUERY TEMPLATE

```sql
SELECT DISTINCT *
FROM GRAPH_TABLE("product_graph"
    MATCH
        (p IS PRODUCTVOD) -[r IS PRODUCTVOD_HAS_VERSION_VODVERSION]-> (v IS VODVERSION)
    COLUMNS(
        p.ROW_ID       AS vod_id,
        p.VOD_NAME     AS vod_name,
        p.OBJECT_NUMBER AS object_number,
        v.VERSION_NUMBER AS version_number,
        v.CURRENT_VERSION_FLAG AS current_version_flag
    )
)
WHERE vod_name = 'MyProduct'
  AND current_version_flag = 'Y'
```

---

## VERSIONING RULES (Apply to Every Versioned Query)

1. **Get current version:** Filter `VODVERSION` with `CURRENT_VERSION_FLAG = 'Y'`  
2. **Get version by date:** Filter `START_DATE <= :date AND (END_DATE IS NULL OR :date <= END_DATE)`  
3. **Filter child nodes by version range:** `FIRST_VERSION <= version_number AND (LAST_VERSION IS NULL OR version_number <= LAST_VERSION)` — apply at **every hop**

---

## OBJECTRELATIONSHIP — SUB_OBJECT_TYPE_CODE Rules

| Code | Meaning | Key Field for Join |
|---|---|---|
| `'Product'` | Product-to-Product link | `SUB_OBJECT_PRODUCT_ID` → `PRODUCTVOD.OBJECT_NUMBER` |
| `'Port'` | Product/Class-to-Class port | `SUB_OBJECT_CLASS_ID` → `CLASSVOD.OBJECT_NUMBER` |
| `'DynPort'` | Dynamic class relationship | `SUB_OBJECT_CLASS_ID` → `CLASSVOD.OBJECT_NUMBER` |

- Domain traversal (`OBJECTRELATIONSHIP → OBJECTRELATIONSHIPDOMAIN`) is only valid for `'Port'` or `'DynPort'`  
- **Always filter `SUB_OBJECT_TYPE_CODE`** whenever using `OBJECTRELATIONSHIP`

---

## VERTEX LABELS & PROPERTIES

### PRODUCTVOD
`ROW_ID`, `VOD_NAME`, `OBJECT_NUMBER`, `DESCRIPTIVE_TEXT`, `VOD_TYPE`, `LOCKED_FLAG`, `LAST_UPDATED_ON`

### CLASSVOD
`ROW_ID`, `VOD_NAME`, `OBJECT_NUMBER`, `DESCRIPTIVE_TEXT`, `VOD_TYPE`, `LOCKED_FLAG`, `LAST_UPDATED_ON`

### ATTRIBUTEVOD
`ROW_ID`, `VOD_NAME`, `OBJECT_NUMBER`, `DESCRIPTIVE_TEXT`, `VOD_TYPE`, `LOCKED_FLAG`, `LAST_UPDATED_ON`

### VODVERSION
`ROW_ID`, `VOD_ID`, `VERSION_NUMBER`, `VERSION_ID`, `START_DATE`, `END_DATE`, `CURRENT_VERSION_FLAG`, `RELEASED_FLAG`, `ACTIVE_FLAG`, `DESCRIPTIVE_TEXT`, `LAST_UPDATED_ON`

### OBJECTDEFINITION
`ROW_ID`, `VOD_ID`, `OBJECT_NAME`, `DESCRIPTIVE_TEXT`, `FIRST_VERSION`, `LAST_VERSION`, `PARENT_VOD_ID`, `PARENT_VOD_VERSION`, `PRE_PICK_CODE`, `POST_PICK_CODE`, `SMART_PART_NUMBER_DEFINITION_ID`, `ORIGINAL_ID`, `LAST_UPDATED_ON`

### OBJECTATTRIBUTE
`ROW_ID`, `VOD_ID`, `ATTRIBUTE_DEFINITION_ID`, `ATTRIBUTE_DEFINITION_VERSION`, `FIRST_VERSION`, `LAST_VERSION`, `SEQUENCE_NUMBER`, `LOCAL_NAME`, `DEFAULT_VALUE`, `REQUIRED_FLAG`, `HIDDEN_FLAG`, `ASSET_FLAG`, `VECTOR_FLAG`, `DOMAIN_TYPE_CODE`, `MINIMUM_VALUE`, `MAXIMUM_VALUE`, `INCREMENT_VALUE`, `UNIT_OF_MEASURE_CODE`, `PRE_PICK_CODE`, `POST_PICK_CODE`, `PARAMETRIC_SEARCH_FLAG`, `REJECT_VALUE`, `VALIDATION_SPECIFICATION`, `ELIGIBILITY_WORKFLOW_PROCEDURE_NAME`, `DESCRIPTIVE_TEXT`, `ORIGINAL_ID`, `LAST_UPDATED_ON`

### OBJECTRELATIONSHIP
`ROW_ID`, `VOD_ID`, `ORIGINAL_ID`, `RELATIONSHIP_NAME`, `RELATIONSHIP_TYPE_CODE`, `SUB_OBJECT_TYPE_CODE`, `SUB_OBJECT_PRODUCT_ID`, `SUB_OBJECT_PRODUCT_VERSION`, `SUB_OBJECT_CLASS_ID`, `SUB_OBJECT_CLASS_VERSION`, `DEFAULT_SUB_OBJECT_PRODUCT_ID`, `DEFAULT_QUANTITY`, `MINIMUM_QUANTITY`, `MAXIMUM_QUANTITY`, `OPTION_FLAG`, `DISPLAY_COMPONENT_FLAG`, `DISPLAY_COMPONENT_PRICE_FLAG`, `FORECAST_FLAG`, `SEQUENCE_NUMBER`, `PARENT_RELATIONSHIP_ID`, `FIRST_VERSION`, `LAST_VERSION`, `DESCRIPTIVE_TEXT`, `ORIGINAL_ID`, `LAST_UPDATED_ON`

### OBJECTRELATIONSHIPDOMAIN
`ROW_ID`, `VOD_ID`, `PARENT_RELATIONSHIP_ID`, `ORIGINAL_ID`, `RELATIONSHIP_NAME`, `RELATIONSHIP_TYPE_CODE`, `SUB_OBJECT_PRODUCT_ID`, `SUB_OBJECT_PRODUCT_VERSION`, `SUB_OBJECT_CLASS_ID`, `SUB_OBJECT_CLASS_VERSION`, `DEFAULT_SUB_OBJECT_PRODUCT_ID`, `DEFAULT_QUANTITY`, `MINIMUM_QUANTITY`, `MAXIMUM_QUANTITY`, `OPTION_FLAG`, `DISPLAY_COMPONENT_FLAG`, `DISPLAY_COMPONENT_PRICE_FLAG`, `FORECAST_FLAG`, `SEQUENCE_NUMBER`, `FIRST_VERSION`, `LAST_VERSION`, `DESCRIPTIVE_TEXT`, `LAST_UPDATED_ON`

### ATTRIBUTEDEFINITION
`ROW_ID`, `VOD_ID`, `FIRST_VERSION`, `LAST_VERSION`, `DATA_TYPE_CODE`, `DOMAIN_TYPE_CODE`, `UNIT_OF_MEASURE_CODE`, `MINIMUM_VALUE`, `MAXIMUM_VALUE`, `INCREMENT_VALUE`, `ORIGINAL_ID`, `LAST_UPDATED_ON`

### ATTRIBUTEVALUE
`ROW_ID`, `VOD_ID`, `LANGUAGE_INDEPENDENT_CODE_VALUE`, `SEQUENCE_NUMBER`, `ACTIVE_FLAG`, `FIRST_VERSION`, `LAST_VERSION`, `ORIGINAL_ID`, `LAST_UPDATED_ON`

### ATTRIBUTEVALUETRANSLATION
`ROW_ID`, `PARENT_ROW_ID`, `LANGUAGE_ID`, `LANGUAGE_INDEPENDENT_CODE_VALUE`, `LAST_UPDATED_ON`

### CONSTRAINTRULE
`ROW_ID`, `VOD_ID`, `RULE_NAME`, `RULE_SPECIFICATION`, `NATURAL_LANGUAGE_SPECIFICATION`, `RULE_COMMENTS`, `ACTIVE_FLAG`, `FIRST_VERSION`, `LAST_VERSION`, `RULE_START_DATE`, `RULE_END_DATE`, `RULE_DESIGNER_ID`, `DESCRIPTIVE_TEXT`, `ORIGINAL_ID`, `LAST_UPDATED_ON`

### CONSTRAINTRULETRANSLATION
`ROW_ID`, `PARENT_ROW_ID`, `LANGUAGE_ID`, `DESCRIPTIVE_TEXT`, `LAST_UPDATED_ON`

### LINKEDITEM
`ROW_ID`, `VOD_ID`, `LINKED_ITEM_NAME`, `BUSINESS_OBJECT_NAME`, `BUSINESS_COMPONENT_NAME`, `FIELD_NAME`, `SEARCH_SPECIFICATION`, `SORT_SPECIFICATION`, `DEFAULT_VALUE`, `VALIDATION_VALUE`, `VARIABLE_NAME`, `VARIABLE_EXPRESSION`, `SYSTEM_KEYWORD_CODE`, `ACTIVE_FLG`, `EXEC_FLG`, `FIRST_VERSION`, `LAST_VERSION`, `ORIGINAL_ID`, `DESCRIPTIVE_TEXT`, `LAST_UPDATED_ON`

### RESOURCES
`ROW_ID`, `VOD_ID`, `RESOURCE_NAME`, `DATA_TYPE_CODE`, `DOMAIN_SPECIFICATION`, `INHERIT_FLAG`, `FIRST_VERSION`, `LAST_VERSION`, `ORIGINAL_ID`, `DESCRIPTIVE_TEXT`, `LAST_UPDATED_ON`

### SCRIPT
`ROW_ID`, `VOD_ID`, `ITEM_ID`, `ITEM_TYPE_CODE`, `ITEM_VERSION`, `SCRIPT_NAME`, `SCRIPT_TEXT`, `PROGRAMMING_LANGUAGE`, `SEQUENCE`, `ACTIVE_FLAG`, `FIRST_VERS`, `LAST_VERS`, `ORIGINAL_ID`, `DESCRIPTIVE_TEXT`, `LAST_UPDATED_ON`

### OBJECTUIPROPERTY
`ROW_ID`, `VOD_ID`, `PROPERTY_NAME`, `PROPERTY_TYPE_CD`, `ITEM_TYPE_CODE`, `ITEM_DEFINITION`, `ITEM_VALUE_SPECIFICATION`, `FIRST_VERSION`, `LAST_VERSION`, `ORIGINAL_ID`, `LAST_UPDATED_ON`

### OBJECTUIPROPERTYTRANSLATION
`ROW_ID`, `PARENT_ROW_ID`, `LANGUAGE_ID`, `ITEM_VALUE_SPECIFICATION`, `LAST_UPDATED_ON`

### OBJECTDEFINITIONTRANSLATION
`ROW_ID`, `PARENT_ROW_ID`, `LANGUAGE_ID`, `OBJECT_NAME`, `DESCRIPTIVE_TEXT`, `LAST_UPDATED_ON`

### OBJECTATTRIBUTETRANSLATION
`ROW_ID`, `PARENT_ROW_ID`, `LANGUAGE_ID`, `LOCAL_NAME`, `DESCRIPTIVE_TEXT`, `LAST_UPDATED_ON`

### OBJECTRELATIONSHIPTRANSLATION
`ROW_ID`, `PARENT_ROW_ID`, `LANGUAGE_ID`, `RELATIONSHIP_NAME`, `LAST_UPDATED_ON`

### VODTRANSLATION
`ROW_ID`, `PARENT_ROW_ID`, `LANGUAGE_ID`, `VOD_NAME`, `DESCRIPTIVE_TEXT`, `LAST_UPDATED_ON`

### PRODUCTDEFINITION
`ROW_ID`, `NAME`, `CONFIGURATION_MODEL_ID`, `PRODUCT_CODE`, `PRODUCT_TYPE_CODE`, `PART_NUMBER`, `ALIAS_NAME`, `STATUS`, `TYPE`, `ACTIVE_FLAG`, `BILLABLE_FLAG`, `EFFECTIVE_START_DATE`, `EFFECTIVE_END_DATE`, `CURCY_CD`, `PRICE_TYPE_CD`, `UNIT_OF_MEASURE_CODE`, `BUSINESS_UNIT_ID`, `PRIMARY_PRODUCT_LINE`, `PRIMARY_POSITION`, `FULFILLMENT_ITEM_CODE`, `INTEGRATION_PRODUCT_TYPE`, `PROMOTION_TYPE_CODE`, `PROMOTION_INSTANCE_CODE`, `VERSION`, `DESCRIPTIVE_TEXT`, `LAST_UPDATED_ON`

### PROMOTIONDEFINITION
*(Same properties as PRODUCTDEFINITION)*  
`ROW_ID`, `NAME`, `CONFIGURATION_MODEL_ID`, `PRODUCT_CODE`, `PRODUCT_TYPE_CODE`, `PART_NUMBER`, `ALIAS_NAME`, `STATUS`, `TYPE`, `ACTIVE_FLAG`, `BILLABLE_FLAG`, `EFFECTIVE_START_DATE`, `EFFECTIVE_END_DATE`, `CURCY_CD`, `PRICE_TYPE_CD`, `UNIT_OF_MEASURE_CODE`, `BUSINESS_UNIT_ID`, `PRIMARY_PRODUCT_LINE`, `PRIMARY_POSITION`, `FULFILLMENT_ITEM_CODE`, `INTEGRATION_PRODUCT_TYPE`, `PROMOTION_TYPE_CODE`, `PROMOTION_INSTANCE_CODE`, `VERSION`, `DESCRIPTIVE_TEXT`, `LAST_UPDATED_ON`

### PROMOTIONITEM
`ROW_ID`, `PROMOTION_ID`, `PRODUCT_ID`, `SUB_OBJECT_VOD_NUMBER`, `PARENT_PROMOTION_ITEM_ID`, `ROOT_PROMOTION_ITEM_ID`, `ITEM_NAME`, `TYPE_CODE`, `SEQUENCE_NUMBER`, `DEFAULT_QUANTITY`, `MINIMUM_QUANTITY`, `MAXIMUM_QUANTITY`, `PRODUCT_CLASS_VOD_NUMBER`, `PRODUCT_LINE_ID`, `PRODUCT_PORT_ORIGIN_ID`, `RECOMMENDATION_FLAG`, `DOMAIN_MODIFICATION_FLAG`, `EXTENDED_ATTRIBUTE_MODIFICATION_FLAG`, `CARDNALITY_MODIFICATION_FLAG`, `CP_CONSTRAINT_MODIFICATION_FLAG`, `COMMIT_COVERAGE_FLAG`, `COMMIT_PERIOD`, `COMMIT_PERIOD_UNIT_OF_MEASURE`, `GRACE_PERIOD`, `GRACE_PERIOD_UNIT_OF_MEASURE`, `DISCONNECT_ACTION_TYPE`, `CHARGE_AMOUNT`, `PRORATE_PLAN`, `DEFAULT_BILLING_ACCOUNT`, `DEFAULT_OWNER_ACCOUNT`, `DEFAULT_SERVICE_ACCOUNT`, `APPLY_COMPONENT_CHARGE_FLAG`, `DESCRIPTION_TEXT`, `LAST_UPDATED_ON`

### PROMOTIONITEMTRANSLATION
`ROW_ID`, `PARENT_ROW_ID`, `LANGUAGE_ID`, `DESCRIPTION_TEXT`, `LAST_UPDATED_ON`

### PROMOTIONITEMXA
`ROW_ID`, `PROMOTION_ITEM_ID`, `ATTRIBUTE_NAME`, `CONDITIONAL_ACTION_CODE`, `LAST_UPDATED_ON`

### PROMOTIONITEMVAL
`ROW_ID`, `PARENT_ROW_ID`, `ATTRIBUTE_VALUE`, `LAST_UPDATED_ON`

### PROMOTIONCHARGE
`ROW_ID`, `PROMOTION_ID`, `TYPE_CODE`, `CHARGE_AMOUNT`, `CHARGE_AMOUNT_CURRENCY_CODE`, `CHARGE_AMOUNT_EXCHANGE_DATE`, `CHARGE_PERIOD`, `GRACE_PERIOD_NUMBER`, `GRACE_PERIOD_UNIT_OF_MEASURE`, `PRORATE_PLAN_ID`, `LAST_UPDATED_ON`

### PROMOTIONPRICING
`ROW_ID`, `PROMOTION_ID`, `PRODUCT_ID`, `PRICING_TYPE_CODE`, `PRICING_ADJUSTMENT_CODE`, `PRICING_ADJUSTMENT_VALUE`, `CURRENCY_CODE`, `EXCHANGE_DATE`, `EFFECTIVE_START_DATE`, `EFFECTIVE_END_DATE`, `DISTRIBUTION_CHANNEL_CODE`, `SALES_ORGANIZATION_CODE`, `DIVISION_CODE`, `MATRIX_RULE_NUMBER`, `ADJUSTMENT_GROUP_ID`, `PRODUCT_CLASS_VOD_NUMBER`, `PRODUCT_LINE_ID`, `PROMOTION_GROUP_ID`, `PROMOTION_GROUP_MEMBERSHIP_ID`, `LAST_UPDATED_ON`

### PROMOTIONTERM
`ROW_ID`, `PRODUCT_ID`, `ASSOCIATE_PRODUCT_ID`, `NAME`, `TYPE_CODE`, `SECTION_NUMBER`, `SEQUENCE_NUMBER`, `TERM_TEMPLATE_ID`, `DESCRIPTIVE_TEXT`, `LAST_UPDATED_ON`

### PROMOTIONMERGESPLIT
`ROW_ID`, `PROMOTION_PRODUCT_ID`, `OPERATION_NAME`, `OPERATION_DESCRIPTION`, `PROMOTION_OPERATION_TYPE`, `DURATION_CODE`, `AGGR_DURATION_CD`, `COMMIT_START_CODE`, `DISPLAY_COMMITMENT_FLAG`, `DISPLAY_PRORATED_CHARGE_FLAG`, `PENALTY_AMOUNT`, `PENALTY_AMOUNT_CURRENCY_CODE`, `PENALTY_AMOUNT_EXCHANGE_DATE`, `PRO_RATED_PLAN_ID`, `LAST_UPDATED_ON`

### PROMOTIONMERGESPLITCOMP
`ROW_ID`, `PROMOTION_OPERATION_ID`, `PRODUCT_ID`, `DESCRIPTION_TEXT`, `SEQUENCE_NUMBER`, `DEFAULT_QUANTITY`, `MINIMUM_QUANTITY`, `MAXIMUM_QUANTITY`, `PROMOTION_DURATION_CODE`, `COMMIT_START_CODE`, `DISPLAY_COMMITMENT_FLAG`, `DISPLAY_PRORATED_CHARGE_FLAG`, `PENALTY_AMOUNT`, `PENALTY_AMOUNT_CURRENCY_CODE`, `PENALTY_AMOUNT_EXCHANGE_DATE`, `PRORATE_PLAN`, `LAST_UPDATED_ON`

### PROMOTIONMESSAGES
`ROW_ID`, `PARENT_ROW_ID`, `LANGUAGE_ID`, `DESCRIPTIVE_TEXT`, `REASON_TEXT`, `LAST_UPDATED_ON`

### PROMOTIONUPGRADE
`ROW_ID`, `PRODUCT_ID`, `PARENT_PRODUCT_ID`, `PRODUCT_CLASS_VOD_NUMBER`, `PRODUCT_LINE_ID`, `DOCKING_NUMBER`, `LINE_NUMBER`, `QUANTITY`, `OPTION_FLAG`, `RELATION_TYPE`, `DURATION_CODE`, `COMMIT_START_CODE`, `EFF_START_DT`, `EFF_END_DATE`, `MENU_COURSE_NUMBER`, `SPLIT_MENU_PRICE`, `SPLIT_MENU_PRICING_FLAG`, `PERCENT_TO_SELL`, `PORTFOLIO_PERCENT`, `PACKAGE_MANUAL_ALLOCATION_AMOUNT`, `DISPLAY_COMMITMENT_FLAG`, `DISPLAY_PRORATED_CHARGE_FLAG`, `DISPLAY_COMPONENT_FLAG`, `DISPLAY_COMPONENT_PRICE_FLAG`, `PENALTY_AMOUNT`, `PENALTY_AMOUNT_CURRENCY_CODE`, `PENALTY_AMOUNT_EXCHANGE_DATE`, `PRORATE_PLAN_ID`, `UPGRADE_OFFER_DESCRIPTION`, `REPORT_SEQUENCE_NUMBER`, `VALIDATION_STATUS_CODE`, `SERVICE_CHARGE_TYPES`, `DESCRIPTIVE_TEXT`, `LAST_UPDATED_ON`

### PROMOTIONCONFIGITEM
`ROW_ID`, `PROD_ID`, `PROMOTION_NUMBER`, `PROMOTION_GROUP_ID`, `PROMOTION_GROUP_MEMBERSHIP_ID`, `PAR_ITEM_ORIG_ID`, `PRO_LST_ITEM_ID`, `ADJ_VAL_AMT`, `CURCY_CD`, `EXCH_DT`, `MIN_PRI`, `MAX_PRI`, `EFF_START_DT`, `EFF_END_DT`, `DOCKING_NUMBER`, `PRO_ADJ_TYPE_CD`, `LAST_UPDATED_ON`

### JOINTWORKSPACE
`ROW_ID`, `JOINT_WORKSPACE_NAME`, `STATUS_CODE`, `BASE_SYSTEM_TIMESTAMP`, `EFFECTIVE_RELEASE_TIMESTAMP`, `DESCRIPTIVE_TEXT`, `LAST_UPDATED_ON`

### JOINTWORKSPACEITEM
`ROW_ID`, `JOINT_WORKSPACE_ID`, `VOD_ID`, `VERSIONED_OBJECT_DEFINITION_VERSION`, `VERSIONED_OBJECT_DEFINITION_STATUS_CODE`, `LAST_UPDATED_ON`

### JOINTWORKSPACETRANSLATION
`ROW_ID`, `PARENT_ROW_ID`, `LANGUAGE_ID`, `JOINT_WORKSPACE_NAME`, `DESCRIPTIVE_TEXT`, `LAST_UPDATED_ON`

### UIOPTION
`ROW_ID`, `VOD_ID`, `ORIGINAL_ID`, `USER_INTERFACE_OPTION_NAME`, `USER_INTERFACE_OPTION_CODE`, `USER_INTERFACE_CONTROL_STYLE_ID`, `USER_INTERFACE_FRAME_STYLE_ID`, `PRIMARY_RESPONSIBILITY_ID`, `SEQUENCE_NUMBER`, `FIRST_VERSION`, `LAST_VERSION`, `ORIGINAL_ID`, `DESCRIPTIVE_TEXT`, `LAST_UPDATED_ON`

### UIGROUP
`ROW_ID`, `VOD_ID`, `ORIGINAL_ID`, `USER_INTERFACE_GROUP_NAME`, `USER_INTERFACE_OPTION_ID`, `USER_INTERFACE_CONTROL_STYLE_ID`, `SEQUENCE_NUMBER`, `FIRST_VERSION`, `LAST_VERSION`, `ORIGINAL_ID`, `DESCRIPTIVE_TEXT`, `LAST_UPDATED_ON`

### UIGROUPITEM
`ROW_ID`, `VOD_ID`, `ORIGINAL_ID`, `USER_INTERFACE_GROUP_ID`, `ITEM_NAME`, `ITEM_ID`, `ITEM_TYPE_CODE`, `PATH_SPECIFICATION`, `USER_INTERFACE_CONTROL_STYLE_ID`, `SEQUENCE_NUMBER`, `FIRST_VERSION`, `LAST_VERSION`, `LAST_UPDATED_ON`

### UIGROUPTRANSLATION
`ROW_ID`, `PARENT_ROW_ID`, `LANGUAGE_ID`, `USER_INTERFACE_GROUP_NAME`, `LAST_UPDATED_ON`

### UIRESPONSIBILITY
`ROW_ID`, `VOD_ID`, `USER_INTERFACE_ID`, `RESPONSIBILITY_ID`, `FIRST_VERSION`, `LAST_VERSION`, `ORIGINAL_ID`, `LAST_UPDATED_ON`

---

## EDGE RELATIONSHIPS & JOIN KEYS

> **Format:** `EDGE_LABEL` | Source.`src_col` → Target.`tgt_col`

### VOD → Version
| Edge Label | Source → Join Col | Target → Join Col |
|---|---|---|
| `PRODUCTVOD_HAS_VERSION_VODVERSION` | `PRODUCTVOD.ROW_ID` | `VODVERSION.VOD_ID` |
| `CLASSVOD_HAS_VERSION_VODVERSION` | `CLASSVOD.ROW_ID` | `VODVERSION.VOD_ID` |
| `ATTRIBUTEVOD_HAS_VERSION_VODVERSION` | `ATTRIBUTEVOD.ROW_ID` | `VODVERSION.VOD_ID` |

### VOD → ObjectDefinition
| Edge Label | Source → Join Col | Target → Join Col |
|---|---|---|
| `PRODUCTVOD_HAS_DEFINITION_OBJECTDEFINITION` | `PRODUCTVOD.ROW_ID` | `OBJECTDEFINITION.VOD_ID` |
| `CLASSVOD_HAS_DEFINITION_OBJECTDEFINITION` | `CLASSVOD.ROW_ID` | `OBJECTDEFINITION.VOD_ID` |
| `PRODUCTVOD_HAS_PARENT_OBJECTDEFINITION` | `PRODUCTVOD.ROW_ID` | `OBJECTDEFINITION.PARENT_VOD_ID` |
| `OBJECTDEFINITION_HAS_PARENT_OBJECTDEFINITION` | `OBJECTDEFINITION.PARENT_VOD_ID` | `OBJECTDEFINITION.VOD_ID` |
| `OBJECTDEFINITION_REFERS_TO_CLASSVOD` | `OBJECTDEFINITION.PARENT_VOD_ID` | `CLASSVOD.OBJECT_NUMBER` |

### VOD → ObjectAttribute
| Edge Label | Source → Join Col | Target → Join Col |
|---|---|---|
| `PRODUCTVOD_HAS_ATTRIBUTE_OBJECTATTRIBUTE` | `PRODUCTVOD.ROW_ID` | `OBJECTATTRIBUTE.VOD_ID` |
| `CLASSVOD_HAS_ATTRIBUTE_OBJECTATTRIBUTE` | `CLASSVOD.ROW_ID` | `OBJECTATTRIBUTE.VOD_ID` |
| `OBJECTATTRIBUTE_REFERS_TO_ATTRIBUTEVOD` | `OBJECTATTRIBUTE.ATTRIBUTE_DEFINITION_ID` | `ATTRIBUTEVOD.OBJECT_NUMBER` |

### VOD → ObjectRelationship & Domain
| Edge Label | Source → Join Col | Target → Join Col |
|---|---|---|
| `PRODUCTVOD_HAS_RELATIONSHIP_OBJECTRELATIONSHIP` | `PRODUCTVOD.ROW_ID` | `OBJECTRELATIONSHIP.VOD_ID` |
| `CLASSVOD_HAS_RELATIONSHIP_OBJECTRELATIONSHIP` | `CLASSVOD.ROW_ID` | `OBJECTRELATIONSHIP.VOD_ID` |
| `OBJECTRELATIONSHIP_HAS_RELATIONSHIP_DOMAIN_OBJECTRELATIONSHIPDOMAIN` | `OBJECTRELATIONSHIP.ORIGINAL_ID` | `OBJECTRELATIONSHIPDOMAIN.PARENT_RELATIONSHIP_ID` |
| `PRODUCTRELATION_REFERS_TO_PRODUCTVOD` | `OBJECTRELATIONSHIP.SUB_OBJECT_PRODUCT_ID` | `PRODUCTVOD.OBJECT_NUMBER` |
| `OBJECTRELATIONSHIP_REFERS_TO_CLASSVOD` | `OBJECTRELATIONSHIP.SUB_OBJECT_CLASS_ID` | `CLASSVOD.OBJECT_NUMBER` |
| `OBJECTRELATIONSHIPDOMAIN_REFERS_TO_PRODUCTVOD` | `OBJECTRELATIONSHIPDOMAIN.SUB_OBJECT_PRODUCT_ID` | `PRODUCTVOD.OBJECT_NUMBER` |
| `DEFAULTPRODUCT_REFERS_TO_PRODUCTVOD` | `OBJECTRELATIONSHIP.DEFAULT_SUB_OBJECT_PRODUCT_ID` | `PRODUCTVOD.OBJECT_NUMBER` |

### VOD → AttributeDefinition & Values
| Edge Label | Source → Join Col | Target → Join Col |
|---|---|---|
| `ATTRIBUTEVOD_HAS_DETAIL_ATTRIBUTEDEFINITION` | `ATTRIBUTEVOD.ROW_ID` | `ATTRIBUTEDEFINITION.VOD_ID` |
| `ATTRIBUTEVOD_HAS_VALUE_ATTRIBUTEVALUE` | `ATTRIBUTEVOD.ROW_ID` | `ATTRIBUTEVALUE.VOD_ID` |
| `ATTRIBUTEVALUE_HAS_TRANSLATION_ATTRIBUTEVALUETRANSLATION` | `ATTRIBUTEVALUE.ROW_ID` | `ATTRIBUTEVALUETRANSLATION.PARENT_ROW_ID` |

### VOD → Translations
| Edge Label | Source → Join Col | Target → Join Col |
|---|---|---|
| `PRODUCTVOD_HAS_TRANSLATION_VODTRANSLATION` | `PRODUCTVOD.ROW_ID` | `VODTRANSLATION.PARENT_ROW_ID` |
| `CLASSVOD_HAS_TRANSLATION_VODTRANSLATION` | `CLASSVOD.ROW_ID` | `VODTRANSLATION.PARENT_ROW_ID` |
| `ATTRIBUTEVOD_HAS_TRANSLATION_VODTRANSLATION` | `ATTRIBUTEVOD.ROW_ID` | `VODTRANSLATION.PARENT_ROW_ID` |
| `OBJECTDEFINITION_HAS_TRANSLATION_OBJECTDEFINITIONTRANSLATION` | `OBJECTDEFINITION.ROW_ID` | `OBJECTDEFINITIONTRANSLATION.PARENT_ROW_ID` |
| `OBJECTATTRIBUTE_HAS_TRANSLATION_OBJECTATTRIBUTETRANSLATION` | `OBJECTATTRIBUTE.ROW_ID` | `OBJECTATTRIBUTETRANSLATION.PARENT_ROW_ID` |
| `OBJECTRELATIONSHIP_HAS_TRANSLATION_OBJECTRELATIONSHIPTRANSLATION` | `OBJECTRELATIONSHIP.ROW_ID` | `OBJECTRELATIONSHIPTRANSLATION.PARENT_ROW_ID` |
| `OBJECTUIPROPERTY_HAS_TRANSLATION_OBJECTUIPROPERTYTRANSLATION` | `OBJECTUIPROPERTY.ROW_ID` | `OBJECTUIPROPERTYTRANSLATION.PARENT_ROW_ID` |
| `CONSTRAINTRULE_HAS_TRANSLATION_CONSTRAINTRULETRANSLATION` | `CONSTRAINTRULE.ROW_ID` | `CONSTRAINTRULETRANSLATION.PARENT_ROW_ID` |
| `PROMOTIONITEM_HAS_TRANSLATION_PROMOTIONITEMTRANSLATION` | `PROMOTIONITEM.ROW_ID` | `PROMOTIONITEMTRANSLATION.PARENT_ROW_ID` |
| `JOINTWORKSPACE_HAS_TRANSLATION_JOINTWORKSPACETRANSLATION` | `JOINTWORKSPACE.ROW_ID` | `JOINTWORKSPACETRANSLATION.PARENT_ROW_ID` |
| `UIGROUP_HAS_TRANSLATION_UIGROUPTRANSLATION` | `UIGROUP.ROW_ID` | `UIGROUPTRANSLATION.PARENT_ROW_ID` |

### VOD → Rules, Scripts, Resources, LinkedItems, UI
| Edge Label | Source → Join Col | Target → Join Col |
|---|---|---|
| `PRODUCTVOD_HAS_RULE_CONSTRAINTRULE` | `PRODUCTVOD.ROW_ID` | `CONSTRAINTRULE.VOD_ID` |
| `CLASSVOD_HAS_RULE_CONSTRAINTRULE` | `CLASSVOD.ROW_ID` | `CONSTRAINTRULE.VOD_ID` |
| `PRODUCTVOD_HAS_SCRIPT_SCRIPT` | `PRODUCTVOD.ROW_ID` | `SCRIPT.VOD_ID` |
| `CLASSVOD_HAS_SCRIPT_SCRIPT` | `CLASSVOD.ROW_ID` | `SCRIPT.VOD_ID` |
| `PRODUCTVOD_HAS_RESOURCE_RESOURCES` | `PRODUCTVOD.ROW_ID` | `RESOURCES.VOD_ID` |
| `CLASSVOD_HAS_RESOURCE_RESOURCES` | `CLASSVOD.ROW_ID` | `RESOURCES.VOD_ID` |
| `PRODUCTVOD_HAS_LINKEDITEM_LINKEDITEM` | `PRODUCTVOD.ROW_ID` | `LINKEDITEM.VOD_ID` |
| `CLASSVOD_HAS_LINKEDITEM_LINKEDITEM` | `CLASSVOD.ROW_ID` | `LINKEDITEM.VOD_ID` |
| `PRODUCTVOD_HAS_UIOPTION_UIOPTION` | `PRODUCTVOD.ROW_ID` | `UIOPTION.VOD_ID` |
| `CLASSVOD_HAS_UIOPTION_UIOPTION` | `CLASSVOD.ROW_ID` | `UIOPTION.VOD_ID` |
| `PRODUCTVOD_HAS_UIPROPERTY_OBJECTUIPROPERTY` | `PRODUCTVOD.ROW_ID` | `OBJECTUIPROPERTY.VOD_ID` |
| `CLASSVOD_HAS_UIPROPERTY_OBJECTUIPROPERTY` | `CLASSVOD.ROW_ID` | `OBJECTUIPROPERTY.VOD_ID` |

### VOD → ProductDefinition / PromotionDefinition
| Edge Label | Source → Join Col | Target → Join Col |
|---|---|---|
| `PRODUCTVOD_HAS_DEFINITION_PRODUCTDEFINITION` | `PRODUCTVOD.OBJECT_NUMBER` | `PRODUCTDEFINITION.CONFIGURATION_MODEL_ID` |
| `PRODUCTVOD_HAS_DEFINITION_PROMOTIONDEFINITION` | `PRODUCTVOD.OBJECT_NUMBER` | `PROMOTIONDEFINITION.CONFIGURATION_MODEL_ID` |

### Promotion Hierarchy
| Edge Label | Source → Join Col | Target → Join Col |
|---|---|---|
| `PROMOTIONDEFINITION_HAS_ITEMS_PROMOTIONITEM` | `PROMOTIONDEFINITION.ROW_ID` | `PROMOTIONITEM.PROMOTION_ID` |
| `PROMOTIONDEFINITION_HAS_CHARGE_PROMOTIONCHARGE` | `PROMOTIONDEFINITION.ROW_ID` | `PROMOTIONCHARGE.PROMOTION_ID` |
| `PROMOTIONDEFINITION_HAS_PRICING_PROMOTIONPRICING` | `PROMOTIONDEFINITION.ROW_ID` | `PROMOTIONPRICING.PROMOTION_ID` |
| `PROMOTIONDEFINITION_HAS_TERMS_PROMOTIONTERM` | `PROMOTIONDEFINITION.ROW_ID` | `PROMOTIONTERM.PRODUCT_ID` |
| `PROMOTIONDEFINITION_HAS_MESSAGES_PROMOTIONMESSAGES` | `PROMOTIONDEFINITION.ROW_ID` | `PROMOTIONMESSAGES.PARENT_ROW_ID` |
| `PROMOTIONDEFINITION_HAS_MERGE_SPLIT_PROMOTIONMERGESPLIT` | `PROMOTIONDEFINITION.ROW_ID` | `PROMOTIONMERGESPLIT.PROMOTION_PRODUCT_ID` |
| `PROMOTIONITEM_HAS_PARENT_PROMOTIONITEM` | `PROMOTIONITEM.PARENT_PROMOTION_ITEM_ID` | `PROMOTIONITEM.ROW_ID` |
| `PROMOTIONITEM_HAS_ROOT_PROMOTIONITEM` | `PROMOTIONITEM.ROOT_PROMOTION_ITEM_ID` | `PROMOTIONITEM.ROW_ID` |
| `PROMOTIONITEM_HAS_ATTRIBUTE_PROMOTIONITEMXA` | `PROMOTIONITEM.ROW_ID` | `PROMOTIONITEMXA.PROMOTION_ITEM_ID` |
| `PROMOTIONITEMXA_HAS_ATTRIBUTE_VAL_PROMOTIONITEMVAL` | `PROMOTIONITEMXA.ROW_ID` | `PROMOTIONITEMVAL.PARENT_ROW_ID` |
| `PROMOTIONITEM_POINTS_TO_PRODUCTVOD` | `PROMOTIONITEM.PRODUCT_ID` | `PRODUCTVOD.OBJECT_NUMBER` |
| `PROMOTIONITEM_DOMAIN_PRODUCTVOD` | `PROMOTIONITEM.SUB_OBJECT_VOD_NUMBER` | `PRODUCTVOD.OBJECT_NUMBER` |
| `PROMOTIONITEM_REFERS_TO_PRODUCTDEFINITION` | `PROMOTIONITEM.PRODUCT_ID` | `PRODUCTDEFINITION.ROW_ID` |
| `PROMOTIONMERGESPLIT_HAS_MERGE_SPLIT_COMP_PROMOTIONMERGESPLITCOMP` | `PROMOTIONMERGESPLIT.ROW_ID` | `PROMOTIONMERGESPLITCOMP.PROMOTION_OPERATION_ID` |
| `PROMOTIONMERGESPLITCOMP_REFERS_TO_PRODUCTDEFINITION` | `PROMOTIONMERGESPLITCOMP.PRODUCT_ID` | `PRODUCTDEFINITION.ROW_ID` |
| `PROMOTIONPRICING_REFERS_TO_PRODUCTDEFINITION` | `PROMOTIONPRICING.PRODUCT_ID` | `PRODUCTDEFINITION.ROW_ID` |
| `PROMOTIONTERM_REFERS_TO_PRODUCTDEFINITION` | `PROMOTIONTERM.ASSOCIATE_PRODUCT_ID` | `PRODUCTDEFINITION.ROW_ID` |
| `PROMOTIONCONFIGITEM_REFERS_TO_PRODUCTDEFINITION` | `PROMOTIONCONFIGITEM.PROD_ID` | `PRODUCTDEFINITION.ROW_ID` |
| `SOURCEPROMOTION_REFERS_TO_PROMOTIONDEFINITION` | `PROMOTIONUPGRADE.PRODUCT_ID` | `PROMOTIONDEFINITION.ROW_ID` |
| `TARGETPROMOTION_REFERS_TO_PROMOTIONDEFINITION` | `PROMOTIONUPGRADE.PARENT_PRODUCT_ID` | `PROMOTIONDEFINITION.ROW_ID` |

### JointWorkspace
| Edge Label | Source → Join Col | Target → Join Col |
|---|---|---|
| `JOINTWORKSPACE_HAS_ITEMS_JOINTWORKSPACEITEM` | `JOINTWORKSPACE.ROW_ID` | `JOINTWORKSPACEITEM.JOINT_WORKSPACE_ID` |
| `JOINTWORKSPACEITEM_HAS_PRODUCT_PRODUCTVOD` | `JOINTWORKSPACEITEM.VOD_ID` | `PRODUCTVOD.ROW_ID` |
| `JOINTWORKSPACEITEM_HAS_CLASS_CLASSVOD` | `JOINTWORKSPACEITEM.VOD_ID` | `CLASSVOD.ROW_ID` |
| `JOINTWORKSPACEITEM_HAS_ATTRIBUTE_ATTRIBUTEVOD` | `JOINTWORKSPACEITEM.VOD_ID` | `ATTRIBUTEVOD.ROW_ID` |

### UI Hierarchy
| Edge Label | Source → Join Col | Target → Join Col |
|---|---|---|
| `UIOPTION_HAS_GROUP_UIGROUP` | `UIOPTION.ORIGINAL_ID` | `UIGROUP.USER_INTERFACE_OPTION_ID` |
| `UIOPTION_HAS_RESP_UIRESPONSIBILITY` | `UIOPTION.ORIGINAL_ID` | `UIRESPONSIBILITY.USER_INTERFACE_ID` |
| `UIGROUP_HAS_GROUPITEM_UIGROUPITEM` | `UIGROUP.ORIGINAL_ID` | `UIGROUPITEM.USER_INTERFACE_GROUP_ID` |

---

## COMMON QUERY PATTERNS

### 1. Get Current Version of a ProductVod
```sql
SELECT DISTINCT *
FROM GRAPH_TABLE("product_graph"
    MATCH (p IS PRODUCTVOD) -[IS PRODUCTVOD_HAS_VERSION_VODVERSION]-> (v IS VODVERSION)
    COLUMNS(
        p.VOD_NAME AS vod_name,
        p.OBJECT_NUMBER AS object_number,
        v.VERSION_NUMBER AS version_number,
        v.START_DATE, v.END_DATE,
        v.CURRENT_VERSION_FLAG
    )
)
WHERE vod_name = 'MyProduct'
  AND current_version_flag = 'Y'
```

### 2. Get ObjectDefinitions at Current Version (ProductVod)
```sql
SELECT DISTINCT *
FROM GRAPH_TABLE("product_graph"
    MATCH
        (p IS PRODUCTVOD) -[IS PRODUCTVOD_HAS_VERSION_VODVERSION]-> (v IS VODVERSION),
        (p) -[IS PRODUCTVOD_HAS_DEFINITION_OBJECTDEFINITION]-> (od IS OBJECTDEFINITION)
    COLUMNS(
        p.VOD_NAME AS vod_name,
        v.VERSION_NUMBER AS version_number,
        od.OBJECT_NAME, od.FIRST_VERSION, od.LAST_VERSION
    )
)
WHERE vod_name = 'MyProduct'
  AND current_version_flag = 'Y'
  AND od.FIRST_VERSION <= version_number
  AND (od.LAST_VERSION IS NULL OR version_number <= od.LAST_VERSION)
```

### 3. Get Attributes of a ClassVod at Current Version
```sql
SELECT DISTINCT *
FROM GRAPH_TABLE("product_graph"
    MATCH
        (c IS CLASSVOD) -[IS CLASSVOD_HAS_VERSION_VODVERSION]-> (v IS VODVERSION),
        (c) -[IS CLASSVOD_HAS_ATTRIBUTE_OBJECTATTRIBUTE]-> (oa IS OBJECTATTRIBUTE)
    COLUMNS(
        c.VOD_NAME AS class_name,
        v.VERSION_NUMBER AS version_number,
        oa.ATTRIBUTE_DEFINITION_ID, oa.LOCAL_NAME,
        oa.FIRST_VERSION AS attr_first_ver, oa.LAST_VERSION AS attr_last_ver
    )
)
WHERE class_name = 'MyClass'
  AND current_version_flag = 'Y'
  AND attr_first_ver <= version_number
  AND (attr_last_ver IS NULL OR version_number <= attr_last_ver)
```

### 4. Product-to-Product Relationships (SUB_OBJECT_TYPE_CODE = 'Product')
```sql
SELECT DISTINCT *
FROM GRAPH_TABLE("product_graph"
    MATCH
        (p IS PRODUCTVOD) -[IS PRODUCTVOD_HAS_RELATIONSHIP_OBJECTRELATIONSHIP]-> (r IS OBJECTRELATIONSHIP)
        -[IS PRODUCTRELATION_REFERS_TO_PRODUCTVOD]-> (child IS PRODUCTVOD)
    COLUMNS(
        p.VOD_NAME AS parent_product,
        r.RELATIONSHIP_NAME, r.FIRST_VERSION, r.LAST_VERSION,
        child.VOD_NAME AS child_product
    )
)
WHERE parent_product = 'MyProduct'
  AND r.SUB_OBJECT_TYPE_CODE = 'Product'
```

### 5. Class Port Relationships (SUB_OBJECT_TYPE_CODE IN 'Port'/'DynPort')
```sql
SELECT DISTINCT *
FROM GRAPH_TABLE("product_graph"
    MATCH
        (p IS PRODUCTVOD) -[IS PRODUCTVOD_HAS_RELATIONSHIP_OBJECTRELATIONSHIP]-> (r IS OBJECTRELATIONSHIP)
        -[IS OBJECTRELATIONSHIP_REFERS_TO_CLASSVOD]-> (c IS CLASSVOD)
    COLUMNS(
        p.VOD_NAME AS parent_product,
        r.RELATIONSHIP_NAME,
        r.SUB_OBJECT_TYPE_CODE,
        c.VOD_NAME AS class_name
    )
)
WHERE parent_product = 'MyProduct'
  AND r.SUB_OBJECT_TYPE_CODE IN ('Port', 'DynPort')
```

### 6. Usage Query — Where Is a Product Used? (UNION Pattern)
```sql
-- Path 1: Direct relationship
SELECT DISTINCT p.VOD_NAME AS parent_product
FROM GRAPH_TABLE("product_graph"
    MATCH (p IS PRODUCTVOD) -[IS PRODUCTVOD_HAS_RELATIONSHIP_OBJECTRELATIONSHIP]-> (r IS OBJECTRELATIONSHIP)
    COLUMNS(p.VOD_NAME, r.SUB_OBJECT_PRODUCT_ID, r.SUB_OBJECT_TYPE_CODE)
)
WHERE SUB_OBJECT_PRODUCT_ID = 'TARGET_OBJECT_NUMBER'
  AND SUB_OBJECT_TYPE_CODE = 'Product'

UNION

-- Path 2: Via relationship domain
SELECT DISTINCT p.VOD_NAME AS parent_product
FROM GRAPH_TABLE("product_graph"
    MATCH
        (p IS PRODUCTVOD) -[IS PRODUCTVOD_HAS_RELATIONSHIP_OBJECTRELATIONSHIP]-> (r IS OBJECTRELATIONSHIP)
        -[IS OBJECTRELATIONSHIP_HAS_RELATIONSHIP_DOMAIN_OBJECTRELATIONSHIPDOMAIN]-> (d IS OBJECTRELATIONSHIPDOMAIN)
        -[IS OBJECTRELATIONSHIPDOMAIN_REFERS_TO_PRODUCTVOD]-> (target IS PRODUCTVOD)
    COLUMNS(p.VOD_NAME, target.OBJECT_NUMBER)
)
WHERE target.OBJECT_NUMBER = 'TARGET_OBJECT_NUMBER'

ORDER BY parent_product
```

### 7. Promotion Items for a Promotion
```sql
SELECT DISTINCT *
FROM GRAPH_TABLE("product_graph"
    MATCH
        (pd IS PROMOTIONDEFINITION) -[IS PROMOTIONDEFINITION_HAS_ITEMS_PROMOTIONITEM]-> (pi IS PROMOTIONITEM)
        -[IS PROMOTIONITEM_POINTS_TO_PRODUCTVOD]-> (pv IS PRODUCTVOD)
    COLUMNS(
        pd.NAME AS promotion_name,
        pi.ITEM_NAME, pi.TYPE_CODE, pi.SEQUENCE_NUMBER,
        pv.VOD_NAME AS product_name
    )
)
WHERE promotion_name = 'MyPromotion'
```

---

## KEY RULES SUMMARY

| Rule | Detail |
|---|---|
| **No guessed properties** | Only use property names listed above per vertex/edge |
| **Always filter SUB_OBJECT_TYPE_CODE** | `'Product'`, `'Port'`, or `'DynPort'` on every ObjectRelationship query |
| **Domain traversal** | Only for `'Port'` or `'DynPort'`, not `'Product'` |
| **Version filter at every hop** | `FIRST_VERSION <= ver AND (LAST_VERSION IS NULL OR ver <= LAST_VERSION)` |
| **Join keys from schema** | Always use `source_vertex_column → target_vertex_column` as listed in Edge table above |
| **Usage queries use UNION** | Never use OPTIONAL MATCH — always UNION separate paths |
| **Edge direction in Oracle PGQL** | Use `-[IS EDGE_LABEL]->` (undirected `-[IS EDGE_LABEL]-` also accepted) |